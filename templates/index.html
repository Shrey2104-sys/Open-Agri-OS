{% extends "base.html" %}

{% block content %}
<div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>ğŸŒ¿ Open-Agri</h2>
        </div>
        <nav class="sidebar-nav">
            <a href="#" class="nav-item active" data-target="dashboard">
                <span class="icon">ğŸ </span> <span class="link-text">Dashboard</span>
            </a>
            <a href="#" class="nav-item" data-target="scout">
                <span class="icon">ğŸ›°ï¸</span> <span class="link-text">Agri-Scout</span>
            </a>
            <a href="#" class="nav-item" data-target="doctor">
                <span class="icon">ğŸ”¬</span> <span class="link-text">Agri-Doctor</span>
            </a>
            <a href="#" class="nav-item" data-target="weather">
                <span class="icon">ğŸŒ¦ï¸</span> <span class="link-text">Weather</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <div class="user-info">
                <p>ğŸ‘¤ {{ user.username }}</p>
                <a href="{{ url_for('logout') }}" class="logout-btn">Logout</a>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Market Ticker -->
        <div class="ticker-wrap">
            <div class="ticker">
                <div class="ticker-item">ğŸŒ¾ Wheat: â‚¹2125 (+1.2%)</div>
                <div class="ticker-item">ğŸŒ½ Maize: â‚¹1850 (-0.5%)</div>
                <div class="ticker-item">ğŸš Rice: â‚¹2900 (+0.8%)</div>
                <div class="ticker-item">ğŸ¥” Potato: â‚¹1200 (+2.1%)</div>
                <div class="ticker-item">ğŸ… Tomato: â‚¹3500 (-1.5%)</div>
                <div class="ticker-item">ğŸ§… Onion: â‚¹2400 (+0.5%)</div>
            </div>
        </div>

        <!-- MODULE: DASHBOARD -->
        <section id="dashboard" class="module-section active">
            <header class="module-header">
                <h1>Farm Overview</h1>
                <p>Welcome back, {{ user.username }}</p>
            </header>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Farms Monitored</h3>
                    <div class="value">124</div>
                    <div class="trend positive">+2 this week</div>
                </div>
                <div class="stat-card">
                    <h3>Diseases Prevented</h3>
                    <div class="value">89%</div>
                    <div class="trend positive">+5% efficiency</div>
                </div>
                <div class="stat-card">
                    <h3>Market Trend</h3>
                    <div class="value">Bullish</div>
                    <div class="trend neutral">Wheat Stable</div>
                </div>
            </div>

            <div class="charts-grid">
                <div class="dashboard-grid">
                    <!-- Left Column: Charts -->
                    <div class="chart-section">
                        <div class="chart-card">
                            <h3>Yield History</h3>
                            <canvas id="yieldChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <h3>Market Trends</h3>
                            <canvas id="marketChart"></canvas>
                        </div>
                    </div>

                    <!-- Right Column: Weather & Insights -->
                    <div class="side-panel">
                        <!-- Blue Weather Card -->
                        <div class="weather-card">
                            <div class="weather-header">
                                <div class="weather-location">
                                    <h2>Davanagere,</h2>
                                    <h2>Karnataka</h2>
                                </div>
                                <div class="weather-icon-small">â˜ï¸</div>
                            </div>
                            <div class="weather-temp">29Â°C</div>
                            <div class="weather-details-grid">
                                <div class="weather-detail-box">
                                    <span>Humidity</span>
                                    <strong>79%</strong>
                                </div>
                                <div class="weather-detail-box">
                                    <span>Wind</span>
                                    <strong>11 km/h</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Yellow Insight Card -->
                <div class="insight-card">
                    <div class="insight-icon">ğŸ’¡</div>
                    <div class="insight-content">
                        <h3>Today's Insight</h3>
                        <p>Optimal planting conditions detected for the next 48 hours. Soil moisture
                            levels are ideal, and weather forecasts show stable conditions. Consider
                            starting your wheat sowing operations.</p>
                    </div>
                </div>

                <div class="alerts-container">
                    <h3>ğŸ“¢ System Alerts</h3>
                    <div class="alert-card warning">
                        <span class="icon">âš ï¸</span>
                        <div class="content">
                            <h4>Pest Alert</h4>
                            <p>Fall Armyworm detected in Davanagere region.</p>
                        </div>
                    </div>
                    <div class="alert-card success">
                        <span class="icon">âœ…</span>
                        <div class="content">
                            <h4>Irrigation Complete</h4>
                            <p>Sector 4 watering schedule finished successfully.</p>
                        </div>
                    </div>
                </div>
        </section>

        <!-- MODULE: SCOUT -->
        <section id="scout" class="module-section">
            <header class="module-header">
                <h1>Agri-Scout</h1>
                <p>Land Intelligence & Crop Suitability</p>
            </header>

            <div class="scout-layout">
                <div class="scout-controls glass-card">
                    <h3>ğŸ“ Location Search</h3>
                    <div class="input-group">
                        <input type="text" id="place-input" placeholder="Enter Region (e.g. Davanagere)">
                        <button id="scout-btn" class="btn-primary">Analyze</button>
                    </div>

                    <div id="scout-results" class="hidden">
                        <hr>
                        <h3>ğŸŒ± Crop Advice</h3>
                        <div id="crop-advice-content"></div>
                    </div>
                </div>

                <div class="map-container glass-card">
                    <div id="map"></div>
                </div>
            </div>
        </section>

        <!-- MODULE: DOCTOR -->
        <section id="doctor" class="module-section">
            <header class="module-header">
                <h1>Agri-Doctor</h1>
                <p>AI Plant Pathology Lab</p>
            </header>

            <div class="doctor-layout">
                <div class="upload-zone glass-card" id="drop-zone">
                    <div class="upload-content">
                        <span class="icon-large">ğŸ“¸</span>
                        <h3>Upload Specimen</h3>
                        <p>Drag & drop or click to upload leaf image</p>
                        <input type="file" id="file-input" accept="image/*" hidden>
                    </div>
                </div>

                <div id="diagnosis-result" class="diagnosis-card glass-card hidden">
                    <h3>ğŸ“‹ Diagnosis Report</h3>
                    <div class="confidence-meter">
                        <div class="label">Confidence</div>
                        <div class="bar-bg">
                            <div class="bar-fill" id="confidence-bar"></div>
                        </div>
                        <div class="value" id="confidence-text">0%</div>
                    </div>

                    <div id="disease-status" class="status-box"></div>

                    <button id="treatment-btn" class="btn-primary hidden">ğŸ’Š Generate AI Treatment
                        Plan</button>
                </div>
            </div>

            <!-- Treatment Modal -->
            <div id="treatment-modal" class="modal hidden">
                <div class="modal-content glass-card">
                    <span class="close-modal">&times;</span>
                    <h2>ğŸ©º AI Agronomist Prescription</h2>
                    <div id="treatment-plan-content"></div>
                    <div class="modal-actions">
                        <button class="btn-secondary"
                            onclick="document.getElementById('treatment-modal').classList.add('hidden')">Close</button>
                        <button class="btn-primary" onclick="window.print()">ğŸ–¨ï¸ Print
                            Prescription</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- MODULE: WEATHER -->
        <section id="weather" class="module-section">
            <header class="module-header">
                <h1>Weather Station</h1>
                <p>Detailed Analytics Coming Soon</p>
            </header>
            <div class="weather-dashboard">
                <div class="weather-main glass-card">
                    <div class="weather-icon">â›…</div>
                    <div class="weather-info">
                        <h2 id="w-temp">28Â°C</h2>
                        <p id="w-condition">Partly Cloudy</p>
                    </div>
                </div>
                <div class="weather-details glass-card">
                    <div class="detail-item">
                        <span>ğŸ’§ Humidity</span>
                        <span id="w-humidity">65%</span>
                    </div>
                    <div class="detail-item">
                        <span>ğŸ’¨ Wind</span>
                        <span id="w-wind">12 km/h</span>
                    </div>
                    <div class="detail-item">
                        <span>ğŸŒ± Forecast</span>
                        <span id="w-forecast" style="color: var(--accent-color);">Good for
                            spraying</span>
                    </div>
                </div>
            </div>
        </section>
        <h3>Farms Monitored</h3>
        <div class="value">124</div>
        <div class="trend positive">+2 this week</div>
</div>
<div class="stat-card">
    <h3>Diseases Prevented</h3>
    <div class="value">89%</div>
    <div class="trend positive">+5% efficiency</div>
</div>
<div class="stat-card">
    <h3>Market Trend</h3>
    <div class="value">Bullish</div>
    <div class="trend neutral">Wheat Stable</div>
</div>
</div>

<div class="charts-grid">
    <div class="dashboard-grid">
        <!-- Left Column: Charts -->
        <div class="chart-section">
            <div class="chart-card">
                <h3>Yield History</h3>
                <canvas id="yieldChart"></canvas>
            </div>
            <div class="chart-card">
                <h3>Market Trends</h3>
                <canvas id="marketChart"></canvas>
            </div>
        </div>

        <!-- Right Column: Weather & Insights -->
        <div class="side-panel">
            <!-- Blue Weather Card -->
            <div class="weather-card">
                <div class="weather-header">
                    <div class="weather-location">
                        <h2>Davanagere,</h2>
                        <h2>Karnataka</h2>
                    </div>
                    <div class="weather-icon-small">â˜ï¸</div>
                </div>
                <div class="weather-temp">29Â°C</div>
                <div class="weather-details-grid">
                    <div class="weather-detail-box">
                        <span>Humidity</span>
                        <strong>79%</strong>
                    </div>
                    <div class="weather-detail-box">
                        <span>Wind</span>
                        <strong>11 km/h</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Yellow Insight Card -->
    <div class="insight-card">
        <div class="insight-icon">ğŸ’¡</div>
        <div class="insight-content">
            <h3>Today's Insight</h3>
            <p>Optimal planting conditions detected for the next 48 hours. Soil moisture
                levels are ideal, and weather forecasts show stable conditions. Consider
                starting your wheat sowing operations.</p>
        </div>
    </div>

    <div class="alerts-container">
        <h3>ğŸ“¢ System Alerts</h3>
        <div class="alert-card warning">
            <span class="icon">âš ï¸</span>
            <div class="content">
                <h4>Pest Alert</h4>
                <p>Fall Armyworm detected in Davanagere region.</p>
            </div>
        </div>
        <div class="alert-card success">
            <span class="icon">âœ…</span>
            <div class="content">
                <h4>Irrigation Complete</h4>
                <p>Sector 4 watering schedule finished successfully.</p>
            </div>
        </div>
    </div>
    </section>

    <!-- MODULE: SCOUT -->
    <section id="scout" class="module-section">
        <header class="module-header">
            <h1>Agri-Scout</h1>
            <p>Land Intelligence & Crop Suitability</p>
        </header>

        <div class="scout-layout">
            <div class="scout-controls glass-card">
                <h3>ğŸ“ Location Search</h3>
                <div class="input-group">
                    <input type="text" id="place-input" placeholder="Enter Region (e.g. Davanagere)">
                    <button id="scout-btn" class="btn-primary">Analyze</button>
                </div>

                <div id="scout-results" class="hidden">
                    <hr>
                    <h3>ğŸŒ± Crop Advice</h3>
                    <div id="crop-advice-content"></div>
                </div>
            </div>

            <div class="map-container glass-card">
                <div id="map"></div>
            </div>
        </div>
    </section>

    <!-- MODULE: DOCTOR -->
    <section id="doctor" class="module-section">
        <header class="module-header">
            <h1>Agri-Doctor</h1>
            <p>AI Plant Pathology Lab</p>
        </header>

        <div class="doctor-layout">
            <div class="upload-zone glass-card" id="drop-zone">
                <div class="upload-content">
                    <span class="icon-large">ğŸ“¸</span>
                    <h3>Upload Specimen</h3>
                    <p>Drag & drop or click to upload leaf image</p>
                    <input type="file" id="file-input" accept="image/*" hidden>
                </div>
            </div>

            <div id="diagnosis-result" class="diagnosis-card glass-card hidden">
                <h3>ğŸ“‹ Diagnosis Report</h3>
                <div class="confidence-meter">
                    <div class="label">Confidence</div>
                    <div class="bar-bg">
                        <div class="bar-fill" id="confidence-bar"></div>
                    </div>
                    <div class="value" id="confidence-text">0%</div>
                </div>

                <div id="disease-status" class="status-box"></div>

                <button id="treatment-btn" class="btn-primary hidden">ğŸ’Š Generate AI Treatment
                    Plan</button>
            </div>
        </div>

        <!-- Treatment Modal -->
        <div id="treatment-modal" class="modal hidden">
            <div class="modal-content glass-card">
                <span class="close-modal">&times;</span>
                <h2>ğŸ©º AI Agronomist Prescription</h2>
                <div id="treatment-plan-content"></div>
                <div class="modal-actions">
                    <button class="btn-secondary"
                        onclick="document.getElementById('treatment-modal').classList.add('hidden')">Close</button>
                    <button class="btn-primary" onclick="window.print()">ğŸ–¨ï¸ Print
                        Prescription</button>
                </div>
            </div>
        </div>
    </section>

    <!-- MODULE: WEATHER -->
    <section id="weather" class="module-section">
        <header class="module-header">
            <h1>Weather Station</h1>
            <p>Detailed Analytics Coming Soon</p>
        </header>
        <div class="weather-dashboard">
            <div class="weather-main glass-card">
                <div class="weather-icon">â›…</div>
                <div class="weather-info">
                    <h2 id="w-temp">28Â°C</h2>
                    <p id="w-condition">Partly Cloudy</p>
                </div>
            </div>
            <div class="weather-details glass-card">
                <div class="detail-item">
                    <span>ğŸ’§ Humidity</span>
                    <span id="w-humidity">65%</span>
                </div>
                <div class="detail-item">
                    <span>ğŸ’¨ Wind</span>
                    <span id="w-wind">12 km/h</span>
                </div>
                <div class="detail-item">
                    <span>ğŸŒ± Forecast</span>
                    <span id="w-forecast" style="color: var(--accent-color);">Good for
                        spraying</span>
                </div>
            </div>
        </div>
    </section>
    <h3>Farms Monitored</h3>
    <div class="value">124</div>
    <div class="trend positive">+2 this week</div>
</div>
<div class="stat-card">
    <h3>Diseases Prevented</h3>
    <div class="value">89%</div>
    <div class="trend positive">+5% efficiency</div>
</div>
<div class="stat-card">
    <h3>Market Trend</h3>
    <div class="value">Bullish</div>
    <div class="trend neutral">Wheat Stable</div>
</div>
</div>

<div class="charts-grid">
    <div class="dashboard-grid">
        <!-- Left Column: Charts -->
        <div class="chart-section">
            <div class="chart-card">
                <h3>Yield History</h3>
                <canvas id="yieldChart"></canvas>
            </div>
            <div class="chart-card">
                <h3>Market Trends</h3>
                <canvas id="marketChart"></canvas>
            </div>
        </div>

        <!-- Right Column: Weather & Insights -->
        <div class="side-panel">
            <!-- Blue Weather Card -->
            <div class="weather-card">
                <div class="weather-header">
                    <div class="weather-location">
                        <h2>Davanagere,</h2>
                        <h2>Karnataka</h2>
                    </div>
                    <div class="weather-icon-small">â˜ï¸</div>
                </div>
                <div class="weather-temp">29Â°C</div>
                <div class="weather-details-grid">
                    <div class="weather-detail-box">
                        <span>Humidity</span>
                        <strong>79%</strong>
                    </div>
                    <div class="weather-detail-box">
                        <span>Wind</span>
                        <strong>11 km/h</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Yellow Insight Card -->
    <div class="insight-card">
        <div class="insight-icon">ğŸ’¡</div>
        <div class="insight-content">
            <h3>Today's Insight</h3>
            <p>Optimal planting conditions detected for the next 48 hours. Soil moisture
                levels are ideal, and weather forecasts show stable conditions. Consider
                starting your wheat sowing operations.</p>
        </div>
    </div>

    <div class="alerts-container">
        <h3>ğŸ“¢ System Alerts</h3>
        <div class="alert-card warning">
            <span class="icon">âš ï¸</span>
            <div class="content">
                <h4>Pest Alert</h4>
                <p>Fall Armyworm detected in Davanagere region.</p>
            </div>
        </div>
        <div class="alert-card success">
            <span class="icon">âœ…</span>
            <div class="content">
                <h4>Irrigation Complete</h4>
                <p>Sector 4 watering schedule finished successfully.</p>
            </div>
        </div>
    </div>
    </section>

    <!-- MODULE: SCOUT -->
    <section id="scout" class="module-section">
        <header class="module-header">
            <h1>Agri-Scout</h1>
            <p>Land Intelligence & Crop Suitability</p>
        </header>

        <div class="scout-layout">
            <div class="scout-controls glass-card">
                <h3>ğŸ“ Location Search</h3>
                <div class="input-group">
                    <input type="text" id="place-input" placeholder="Enter Region (e.g. Davanagere)">
                    <button id="scout-btn" class="btn-primary">Analyze</button>
                </div>

                <div id="scout-results" class="hidden">
                    <hr>
                    <h3>ğŸŒ± Crop Advice</h3>
                    <div id="crop-advice-content"></div>
                </div>
            </div>

            <div class="map-container glass-card">
                <div id="map"></div>
            </div>
        </div>
    </section>

    <!-- MODULE: DOCTOR -->
    <section id="doctor" class="module-section">
        <header class="module-header">
            <h1>Agri-Doctor</h1>
            <p>AI Plant Pathology Lab</p>
        </header>

        <div class="doctor-layout">
            <div class="upload-zone glass-card" id="drop-zone">
                <div class="upload-content">
                    <span class="icon-large">ğŸ“¸</span>
                    <h3>Upload Specimen</h3>
                    <p>Drag & drop or click to upload leaf image</p>
                    <input type="file" id="file-input" accept="image/*" hidden>
                </div>
            </div>

            <div id="diagnosis-result" class="diagnosis-card glass-card hidden">
                <h3>ğŸ“‹ Diagnosis Report</h3>
                <div class="confidence-meter">
                    <div class="label">Confidence</div>
                    <div class="bar-bg">
                        <div class="bar-fill" id="confidence-bar"></div>
                    </div>
                    <div class="value" id="confidence-text">0%</div>
                </div>

                <div id="disease-status" class="status-box"></div>

                <button id="treatment-btn" class="btn-primary hidden">ğŸ’Š Generate AI Treatment
                    Plan</button>
            </div>
        </div>

        <!-- Treatment Modal -->
        <div id="treatment-modal" class="modal hidden">
            <div class="modal-content glass-card">
                <span class="close-modal">&times;</span>
                <h2>ğŸ©º AI Agronomist Prescription</h2>
                <div id="treatment-plan-content"></div>
                <div class="modal-actions">
                    <button class="btn-secondary"
                        onclick="document.getElementById('treatment-modal').classList.add('hidden')">Close</button>
                    <button class="btn-primary" onclick="window.print()">ğŸ–¨ï¸ Print
                        Prescription</button>
                </div>
            </div>
        </div>
    </section>

    <!-- MODULE: WEATHER -->
    <section id="weather" class="module-section">
        <header class="module-header">
            <h1>Weather Station</h1>
            <p>Detailed Analytics Coming Soon</p>
        </header>
        <div class="weather-dashboard">
            <div class="weather-main glass-card">
                <div class="weather-icon">â›…</div>
                <div class="weather-info">
                    <h2 id="w-temp">28Â°C</h2>
                    <p id="w-condition">Partly Cloudy</p>
                </div>
            </div>
            <div class="weather-details glass-card">
                <div class="detail-item">
                    <span>ğŸ’§ Humidity</span>
                    <span id="w-humidity">65%</span>
                </div>
                <div class="detail-item">
                    <span>ğŸ’¨ Wind</span>
                    <span id="w-wind">12 km/h</span>
                </div>
                <div class="detail-item">
                    <span>ğŸŒ± Forecast</span>
                    <span id="w-forecast" style="color: var(--accent-color);">Good for
                        spraying</span>
                </div>
            </div>
        </div>
    </section>

    </main>
</div>
<div id="toast-container"></div>

{% endblock %}